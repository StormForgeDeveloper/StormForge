<?xml version="1.0" encoding="UTF-8"?>
<Protocols xmlns="http://www.StormForge.com/XMLProtocol" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.StormForge.com/XMLProtocol ../../StormForge/Engine/Data/Protocol/ProtocolDef.xsd">
	<ProtocolGroup Name="Relay" IsMobile="false" GenCSharp="true" Desc="Relay Protocol">

    <!-- ============================  Relay ============================================ -->

	<C2SEvent Name="JoinRelayInstance" Reliable="false" Crypto="No" Trace="Debug1" Desc="Event for Player Join request.">
		<Params Type="uint32" Name="RelayInstanceID" Desc="Relay instance to join"/>
		<Params Type="PlayerID" Name="PlayerID" Desc="Joining player id"/>
		<Params Type="String" Name="PlayerIdentifier" Desc="Joining player identifier. string value"/>
	</C2SEvent>

	<S2CEvent Name="JoinRelayInstanceRes" Reliable="false" Crypto="No" Trace="Debug1" Desc="Event for joined player">
		<Params Type="Result" Name="Result" Desc="Join result"/>
		<Params Type="uint32" Name="RelayInstanceID" Desc="joined relay instance ID"/>
		<Params Type="uint32" Name="MyEndpointID" Desc="Joined player relayID"/>
		<Params Type="RelayPlayerInfo" IsArray="true" Name="MemberInfos" Desc="Member player IDs"/>
	</S2CEvent>

	<C2SEvent Name="LeaveRelayInstance" Reliable="false" Crypto="No" Trace="Debug1" Desc="Event for Player Join request.">
		<Params Type="uint32" Name="RelayInstanceID" Desc="Relay Instance id"/>
		<Params Type="PlayerID" Name="PlayerID" Desc="player id"/>
	</C2SEvent>


	<S2CEvent Name="PlayerJoin" Reliable="false" Crypto="No" Trace="Debug1" Desc="Event for Player joined.">
		<Params Type="uint32" Name="RelayInstanceID" Desc="Relay Instance id"/>
		<Params Type="RelayPlayerInfo" Name="JoinedPlayerInfo" Desc="Joined player ID"/>
	</S2CEvent>

	<S2CEvent Name="PlayerLeft" Reliable="false" Crypto="No" Trace="Debug1" Desc="Event for Player left.">
		<Params Type="uint32" Name="RelayInstanceID" Desc="Relay Instance id"/>
		<Params Type="PlayerID" Name="LeftPlayerID" Desc="Left player ID"/>
		<Params Type="uint32" Name="KickedReason" Desc="Reason"/>
	</S2CEvent>


	<C2SEvent Name="RelayPacket" Reliable="false" Crypto="No" Trace="Debug1" Desc="Relay packet">
		<Params Type="uint32" Name="RelayInstanceID" Desc="Relay Instance id"/>
		<Params Type="uint32" Name="SenderEndpointID" Desc="Sender player ID"/>
		<Params Type="uint32" Name="TargetEndpointMask" Desc="Target relay mask."/>
		<Params Type="uint8" IsArray="true" Name="Payload" Desc="Payload data"/>
	</C2SEvent>


    <!-- =============================  ======================================= -->

    <!-- ============================  Streaming ============================================ -->

    <Command Name="CreateStream" Reliable="true" Crypto="No" Trace="Debug1" Desc="Create stream instance">
      <Cmd>
        <Params Type="AuthTicket" Name="Ticket" Desc="Login session Ticket"/>
        <Params Type="String" Name="StreamName" Desc="Stream name"/>
      </Cmd>
      <Res>
        <Params Type="NetAddress" Name="StreamServerAddr" Desc="Stream server address to connect"/>
        <Params Type="NetAddress" Name="StreamServerAddrIPV4" Desc="Stream server address to connect"/>
        <Params Type="String" Name="StreamUID" Desc="Unique stream Id generated by server. This wil be used when you operate streaming"/>
      </Res>
    </Command>

    <Command Name="FindStream" Reliable="true" Crypto="No" Trace="Debug1" Desc="Open stream instance">
      <Cmd>
        <Params Type="AuthTicket" Name="Ticket" Desc="Login session Ticket"/>
        <Params Type="String" Name="StreamName" Desc="Stream name"/>
      </Cmd>
      <Res>
        <Params Type="NetAddress" Name="StreamServerAddr" Desc="Stream server address to connect"/>
        <Params Type="NetAddress" Name="StreamServerAddrIPV4" Desc="Stream server address to connect"/>
        <Params Type="String" Name="StreamUID" Desc="Unique stream Id generated by server. This wil be used when you operate streaming"/>
      </Res>
    </Command>

    <Command Name="DeleteStream" Reliable="true" Crypto="No" Trace="Debug1" Desc="Delete stream instance">
      <Cmd>
        <Params Type="AuthTicket" Name="Ticket" Desc="Login session Ticket"/>
        <Params Type="String" Name="StreamName" Desc="stream name to delete"/>
      </Cmd>
      <Res>
      </Res>
    </Command>

    <Command Name="GetStreamList" Reliable="true" Crypto="No" Trace="Debug1" Desc="Get stream list">
      <Cmd>
        <Params Type="AuthTicket" Name="Ticket" Desc="Login session Ticket"/>
      </Cmd>
      <Res>
        <Params Type="String" Name="StreamNames" IsArray="true" Desc="Stream names"/>
      </Res>
    </Command>

	<!-- <C2SEvent Name="NewStreamPacket" Reliable="true" Crypto="No" Trace="Debug1" Desc="Relay packet"> -->
        <!-- <Params Type="String" Name="StreamUID" Desc="Unique stream Id to delete"/> -->
		<!-- <Params Type="uint32" Name="SenderEndpointID" Desc="Sender player ID"/> -->
		<!-- <Params Type="uint32" Name="TargetEndpointMask" Desc="Target relay mask."/> -->
		<!-- <Params Type="uint8" IsArray="true" Name="Payload" Desc="Payload data"/> -->
	<!-- </C2SEvent> -->


	<!-- <S2CEvent Name="StreamPacket" Reliable="true" Crypto="No" Trace="Debug1" Desc="Event for Player left."> -->
		<!-- <Params Type="uint32" Name="RelayInstanceID" Desc="Relay Instance id"/> -->
		<!-- <Params Type="PlayerID" Name="LeftPlayerID" Desc="Left player ID"/> -->
		<!-- <Params Type="uint32" Name="KickedReason" Desc="Reason"/> -->
	<!-- </S2CEvent> -->



    <!-- =============================  ======================================= -->

	</ProtocolGroup>
</Protocols>
